{% extends "students/base.html" %}
{% load static %}
{% block title %}Transaction History{% endblock %}


{% block content %}
<div class="container py-4">
    <h2 class="mb-4">Transaction History</h2>

    <!-- Summary Cards -->
    <div class="row mb-4 g-3">
        <div class="col-md-4">
            <div class="summary-card summary-in">
                <h6>Total Money In</h6>
                <h3>${{ total_in|floatformat:0 }}</h3>
            </div>
        </div>
        <div class="col-md-4">
            <div class="summary-card summary-out">
                <h6>Total Money Out</h6>
                <h3>${{ total_out|floatformat:0 }}</h3>
            </div>
        </div>
        <div class="col-md-4">
            <div class="summary-card summary-balance">
                <h6>Current Balance</h6>
                <h3>${{ current_balance|floatformat:0 }}</h3>
            </div>
        </div>
    </div>

    <!-- Transaction Table -->
    <div class="card shadow-sm">
        <div class="card-body table-responsive">
            <table id="transactionTable" class="table table-striped table-bordered align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Transaction ID</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for transaction in transactions %}
                    <tr>
                        <td><span class="badge bg-secondary">{{ transaction.transaction_group_id }}</span></td>
                        <td>{{ transaction.created_at|date:"M d, Y H:i" }}</td>
                        <td>${{ transaction.amount|floatformat:0 }}</td>
                        <td> {% if transaction.transaction_type == 'credit' %} <span class="badge bg-success">Credit</span> {% else %} <span class="badge bg-danger">Debit</span> {% endif %} </td>
                        <td>{{ transaction.description }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center py-3">No transactions found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- jQuery -->
{% comment %} <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> {% endcomment %}

<!-- DataTables JS -->
{% comment %} <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script> {% endcomment %}

{% comment %} <script>
    $(document).ready(function () {
        $('#transactionTable').DataTable({
            responsive: true,
            pageLength: 10,
            order: [[1, 'desc']], // sort by Date descending
        });
    });
</script> {% endcomment %}
{% endblock %}
